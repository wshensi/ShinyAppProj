{
  "hash": "322d13e51a23516934b76aff7a41465f",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Take-home Exercise 1 (Part 2)\"\ndescription: \"\"\ndate: \"May 11, 2025\"\ndate-modified: \"May 11, 2025\"\nformat: docx\nauthor: \"Wang Shen Si\"\neditor: visual\nexecute: \n  eval: true\n  echo: true\n  warning: false\n  freeze: true\n---\n\n\n\n# Introduction\n\nThis page presents a visualisation critique and redesign based on a submission by my course-mate, XU XINYI, for the third exploratory data analysis task (EDA 3). The original plot titled *“Box Plot with Data Superimposed – Population by Age Group (30–49), Across Planning Areas (2024)”* used faceted box plots to visualize population distribution across six major planning areas in Singapore.\n\n# **Getting started**\n\n## **Load packages**\n\nThe following R packages will be loaded using the `pacman::p_load()` function.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(tidyverse, haven,\n               ggrepel, ggthemes,\n               ggridges, ggdist,\n               patchwork, scales, ggExtra)\n```\n:::\n\n\n\n## **Import data** \n\nTo accomplish the task, Singapore Residents by Planning Area / Subzone, Single Year of Age and Sex, June 2024 dataset shares by [Department of Statistics, Singapore (DOS)](https://www.singstat.gov.sg/) should be used.\n\nThe code chunk below imports *respopagesex2024.csv* into R environment by using [read_csv()](https://readr.tidyverse.org/reference/read_delim.html)function of [readr](https://readr.tidyverse.org/) package. [**readr**]{.underline} is one of the tidyverse package.\n\nWe import this dataset as *sgresident*\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsgresident <- read_csv(\"data/respopagesex2024.csv \")\n```\n:::\n\n\n\n## **Data preprocessing**\n\nWe first take a look at the data and check if there are any duplicates.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(sgresident)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 60,424\nColumns: 6\n$ PA   <chr> \"Ang Mo Kio\", \"Ang Mo Kio\", \"Ang Mo Kio\", \"Ang Mo Kio\", \"Ang Mo K…\n$ SZ   <chr> \"Ang Mo Kio Town Centre\", \"Ang Mo Kio Town Centre\", \"Ang Mo Kio T…\n$ Age  <chr> \"0\", \"0\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", \"4\", \"4\", \"5\", \"5\", \"6\", …\n$ Sex  <chr> \"Males\", \"Females\", \"Males\", \"Females\", \"Males\", \"Females\", \"Male…\n$ Pop  <dbl> 10, 10, 10, 10, 10, 10, 10, 10, 30, 10, 20, 10, 20, 30, 30, 10, 3…\n$ Time <dbl> 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2024,…\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsgresident[duplicated(sgresident),]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 0 × 6\n# ℹ 6 variables: PA <chr>, SZ <chr>, Age <chr>, Sex <chr>, Pop <dbl>,\n#   Time <dbl>\n```\n\n\n:::\n:::\n\n\n\n## **Change data type of selected variables**\n\nVariables with inappropriate data type are Age, Sex, Time. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsgresident <- sgresident %>% \n  mutate(Age = as.numeric(Age))\nsgresident <- sgresident %>%\n  mutate(Sex = factor(Sex, levels = c(\"Males\", \"Females\")))\nsgresident <- sgresident %>%\n  mutate(Time = as.integer(Time))\n```\n:::\n\n\n\n## **Check for missing values**\n\nThe age column has 664 missing values, which have been stored as strings before data type conversion. In this case, we do not need to remove those data.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolSums(is.na(sgresident ))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  PA   SZ  Age  Sex  Pop Time \n   0    0  664    0    0    0 \n```\n\n\n:::\n:::\n\n\n\n## **Preview pre-processed dataframe**\n\nWe use the function **head()** to preview the first few rows of the pre-processed dataframe:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(sgresident, 200)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 200 × 6\n   PA         SZ                       Age Sex       Pop  Time\n   <chr>      <chr>                  <dbl> <fct>   <dbl> <int>\n 1 Ang Mo Kio Ang Mo Kio Town Centre     0 Males      10  2024\n 2 Ang Mo Kio Ang Mo Kio Town Centre     0 Females    10  2024\n 3 Ang Mo Kio Ang Mo Kio Town Centre     1 Males      10  2024\n 4 Ang Mo Kio Ang Mo Kio Town Centre     1 Females    10  2024\n 5 Ang Mo Kio Ang Mo Kio Town Centre     2 Males      10  2024\n 6 Ang Mo Kio Ang Mo Kio Town Centre     2 Females    10  2024\n 7 Ang Mo Kio Ang Mo Kio Town Centre     3 Males      10  2024\n 8 Ang Mo Kio Ang Mo Kio Town Centre     3 Females    10  2024\n 9 Ang Mo Kio Ang Mo Kio Town Centre     4 Males      30  2024\n10 Ang Mo Kio Ang Mo Kio Town Centre     4 Females    10  2024\n# ℹ 190 more rows\n```\n\n\n:::\n:::\n\n\n\n# **Visualisation selected**\n\n## **Original Work**\n\nThe visualisation I selected for critique is the third exploratory data analysis (EDA) plot submitted by my classmate, titled **“**EDA 3: Box Plot with Data Superimposed – Population by Age Group (30–49), Across Planning Areas (2024).”\n\nThis is a faceted boxplot with raw data values superimposed, designed to visualise the population distribution of individuals aged 30 to 49 across six major planning areas in Singapore for the year 2024.\n\nEach planning area is displayed in a separate facet, allowing for structured comparisons across regions. The visual reveals that Tampines and Bedok have relatively high and consistent population levels across all age bands within the 30–49 range, whereas Sengkang and Punggol show pronounced peaks between ages 35 and 44, reflecting their family-oriented demographic profiles. The use of a logarithmic y-axis serves to highlight disparities between densely and sparsely populated subzones, improving the perceptibility of variation across different scales.\n\n::: panel-tabset\n## The Plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex01.2_files/figure-docx/unnamed-chunk-8-1.png)\n:::\n:::\n\n\n\n## The Code Chunk\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Step 1: Prepare data\ndf_pa_box <- sgresident %>%\n  mutate(\n    Age = as.numeric(Age),\n    AgeGroup = cut(\n      Age,\n      breaks = seq(0, 100, by = 5),\n      right = FALSE,\n      include.lowest = TRUE,\n      labels = paste(seq(0, 95, by = 5), seq(4, 99, by = 5), sep = \"-\")\n    )\n  ) %>%\n  filter(Age >= 30, Age < 50) %>%\n  drop_na(AgeGroup)\n\n# Optional: focus only on top 6 PAs for readability\ntop6_pa <- df_pa_box %>%\n  group_by(PA) %>%\n  summarise(Total_Pop = sum(Pop)) %>%\n  arrange(desc(Total_Pop)) %>%\n  slice_head(n = 6) %>%\n  pull(PA)\n\ndf_pa_box <- df_pa_box %>% filter(PA %in% top6_pa)\n\n# Step 2: Boxplot with jittered data, faceted by PA\nggplot(df_pa_box, aes(x = AgeGroup, y = Pop)) +\n  geom_boxplot(fill = \"steelblue\", alpha = 0.6, outlier.shape = NA) +\n  geom_jitter(width = 0.2, alpha = 0.4, color = \"black\", size = 0.8) +\n  scale_y_log10() +\n  facet_wrap(~ PA, scales = \"free_y\") +\n  labs(\n    title = \"Population Distribution by Age Group (30–49), Faceted by Planning Area\",\n    x = \"Age Group\", y = \"Population (log scale)\"\n  ) +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n:::\n\n\n:::\n\n# **Critique**\n\n## Good Visual Design Principles\n\n### Faceted Layout Enables Clear Regional Comparison\n\nThe original chart adopts a faceted layout based on Planning Areas, which allows readers to easily compare intra-region age distributions as well as inter-region demographic trends. This structure enhances analytical clarity by organizing data into manageable visual units.\n\n### Superimposed Raw Data Points Enhance Distribution Transparency\n\nBy overlaying raw population data on each boxplot, the visualisation goes beyond summary statistics and allows viewers to see the spread, density, and presence of outliers in each age group. This contributes to a more data-transparent and trustworthy representation.\n\n### Logarithmic Scale Effectively Handles Skewed Data\n\nThe use of a log-transformed y-axis appropriately addresses large disparities in population counts across planning areas. It compresses extreme values and prevents dominant regions from visually overshadowing those with smaller populations, thereby supporting a fairer visual comparison.\n\n## Further Improvement\n\n### Age Range Selection is Narrow, Limiting Holistic Insights\n\nThe original visualization only focuses on the 30–49 age group, which captures a working-age population but neglects other important demographic segments such as youths and the elderly. By restricting the age scope, the chart omits critical signals related to ageing populations and young family concentrations. The revised version addresses this by including the full age spectrum, providing a more comprehensive demographic perspective.\n\n### Visual Complexity Reduces Interpretability\n\nWith six separate panels, numerous overlaid data points, and a log-scaled axis, the original chart demands high cognitive effort. Viewers may find it difficult to extract key insights at a glance. In contrast, the revised visual adopts a consolidated layout, plotting all planning areas on the same axis, which facilitates faster and more effective interpretation.\n\n### Lack of Statistical Annotations and Visual Emphasis \n\nWhile the original boxplots display medians and quartiles, they omit key statistical markers such as weighted mean age or explicit group-level annotations. The revised version improves upon this by adding red diamonds to indicate weighted means and black dots for medians. These additions guide attention to population central tendencies and enhance overall communicative clarity.\n\n# **Makeover**\n\nThe following visualization represents a makeover of the original EDA 3 plot, which initially focused on the population distribution of residents aged 30–49 across six major planning areas in Singapore. While the original plot effectively used faceted boxplots and data overlays to highlight regional differences within a specific age group, it had several limitations including restricted age scope, visual complexity, and lack of clear statistical markers.\n\nTo address these issues, the makeover plot expands the analysis to include the entire resident age range, offering a more holistic view of demographic structures across regions. It consolidates the six planning areas into a single coordinate space, simplifying comparisons and improving interpretability. Additionally, the visual includes weighted mean ages (marked by red diamonds) and medians (marked by black dots) for each region, enhancing the reader’s ability to detect central tendencies and demographic shifts.\n\n::: panel-tabset\n## The Plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex01.2_files/figure-docx/unnamed-chunk-10-1.png)\n:::\n:::\n\n\n\n## The Code Chunk\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(ggdist)\nlibrary(scales)\n\ndf_age_dist <- sgresident %>%\n  mutate(Age = as.numeric(Age)) %>%\n  drop_na(Age, PA, Pop)\n\ntop4_pa <- df_age_dist %>%\n  group_by(PA) %>%\n  summarise(Total_Pop = sum(Pop, na.rm = TRUE)) %>%\n  arrange(desc(Total_Pop)) %>%\n  slice_head(n = 6) %>%\n  pull(PA)\n\ndf_age_dist <- df_age_dist %>%\n  filter(PA %in% top4_pa)\n\nmean_age <- df_age_dist %>%\n  group_by(PA) %>%\n  summarise(weighted_mean_age = weighted.mean(Age, w = Pop, na.rm = TRUE), .groups = \"drop\")\n\n\nggplot(df_age_dist, aes(x = PA, y = Age, weight = Pop)) +\n  stat_halfeye(fill = \"grey60\", color = NA, alpha = 0.3) +\n  geom_boxplot(\n    aes(group = PA),\n    width = 0.3,\n    fill = \"#c6dbef\",\n    color = \"black\",\n    outlier.shape = NA\n  ) +\n  stat_summary(geom = \"point\", fun = median, color = \"black\") +\n  geom_point(\n    data = mean_age,\n    aes(x = PA, y = weighted_mean_age),\n    color = \"red\", size = 3, shape = 18, inherit.aes = FALSE\n  ) +\n  scale_y_continuous(\n    limits = c(0, 100),\n    breaks = seq(0, 100, 10)\n  ) +\n  labs(\n    title = \"Age Distribution by Region\",\n    subtitle = \"Red diamonds = weighted mean age · Black dots = median age\",\n    caption = \"Data: Singapore Department of Statistics, 2024\",\n    x = \"Region\",\n    y = \"Age\"\n  ) +\n  theme_minimal(base_size = 13) +\n  theme(\n    plot.background = element_rect(fill = \"grey97\", color = NA),\n    panel.grid = element_blank(),\n    panel.grid.major.y = element_line(linewidth = 0.1, color = \"grey75\"),\n    strip.background = element_blank(),\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    plot.title = element_text(face = \"bold\"),\n    plot.subtitle = element_text(margin = margin(b = 10), size = 10),\n    plot.caption = element_text(margin = margin(t = 10), size = 8),\n    plot.margin = margin(10, 10, 10, 10)\n  )\n```\n:::\n\n\n:::\n\n# **References**\n\n[Original work by course-mate](https://xinyixu.netlify.app/take-home_exercise/take-home_ex01/take-home_exercise01)\n",
    "supporting": [
      "Take-home_Ex01.2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}